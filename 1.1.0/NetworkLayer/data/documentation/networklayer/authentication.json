{"hierarchy":{"paths":[["doc:\/\/network-layer.NetworkLayer\/documentation\/NetworkLayer"]]},"sections":[],"abstract":[{"type":"text","text":"Learn how to implement authentication."}],"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"code":"network-layer","type":"codeVoice"},{"text":" includes an ","type":"text"},{"identifier":"doc:\/\/network-layer.NetworkLayer\/documentation\/NetworkLayer\/AuthenticationInterceptor","type":"reference","isActive":true},{"text":" responsible for handling authentication options.","type":"text"}]},{"text":"Access Tokens","type":"heading","level":2,"anchor":"Access-Tokens"},{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"doc:\/\/network-layer.NetworkLayer\/documentation\/NetworkLayer\/AuthenticationInterceptor","isActive":true},{"type":"text","text":" requires passing an "},{"type":"codeVoice","code":"IAuthenticator"},{"type":"text","text":" as initialization parameters that contain logic for updating the access token."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A credential object must conform to "},{"type":"codeVoice","code":"IAuthenticationCredential"},{"type":"text","text":" protocol that indicates whether the credential is valid."}]},{"code":["import NetworkLayerInterfaces","","\/\/ Defines a credential model","struct Credential: IAuthenticationCredential {","    let expires: Date","    let requiresRefresh: Bool { expires < Date() }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"Define a ","type":"text"},{"code":"Authenticator","type":"codeVoice"},{"type":"text","text":" object that confrorms to "},{"code":"IAuthenticator","type":"codeVoice"},{"type":"text","text":" and implement your own logic for validation and refreshing an access token."}]},{"type":"codeListing","code":["import NetworkLayerInterfaces","","struct Authenticator: IAuthenticator {","","    \/\/\/ Applies the `Credential` to the `URLRequest`.","    \/\/\/","    \/\/\/ - Parameters:","    \/\/\/   - credential: The `Credential`.","    \/\/\/   - urlRequest: The `URLRequest`.","    func apply(_ credential: Credential, to urlRequest: inout URLRequest) async throws {","        urlRequest.addValue(\"Bearer <token>\", forHTTPHeaderField: \"Authorization\")","    }","","    \/\/\/ Refreshes the `Credential`.","    \/\/\/","    \/\/\/ - Parameters:","    \/\/\/   - credential: The `Credential` to refresh.","    \/\/\/   - session: The `URLSession` requiring the refresh.","    func refresh(_ credential: Credential, for session: URLSession) async throws -> Credential {","        \/\/ Token refresh logic here","    }","","    \/\/\/  Determines whether the `URLRequest` failed due to an authentication error based on the `HTTPURLResponse`.","    \/\/\/","    \/\/\/ - Parameters:","    \/\/\/   - urlRequest: The `URLRequest`.","    \/\/\/   - response: The `HTTPURLResponse`.","    \/\/\/","    \/\/\/ - Returns: `true` if the `URLRequest` failed due to an authentication error, `false` otherwise.","    func didRequest(_ urlRequest: URLRequest, with response: HTTPURLResponse) -> Bool {","        response.statusCode == 401","    }","","    \/\/\/ Determines whether the `URLRequest` is authenticated with the `Credential`.","    \/\/\/","    \/\/\/ - Parameters:","    \/\/\/   - urlRequest: The `URLRequest`.","    \/\/\/   - credential: The `Credential`.","    \/\/\/","    \/\/\/ - Returns: `true` if the `URLRequest` is authenticated with the `Credential`, `false` otherwise.","    func isRequest(_ urlRequest: URLRequest, authenticatedWith credential: Credential) -> Bool {","        true","    }","}"],"syntax":"swift"}]}],"variants":[{"paths":["\/documentation\/networklayer\/authentication"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","seeAlsoSections":[{"identifiers":["doc:\/\/network-layer.NetworkLayer\/documentation\/NetworkLayer\/GettingStarted"],"anchor":"Essentials","generated":true,"title":"Essentials"}],"metadata":{"title":"Authentication","roleHeading":"Article","modules":[{"name":"NetworkLayer"}],"role":"article"},"schemaVersion":{"major":0,"patch":0,"minor":3},"identifier":{"url":"doc:\/\/network-layer.NetworkLayer\/documentation\/NetworkLayer\/Authentication","interfaceLanguage":"swift"},"references":{"doc://network-layer.NetworkLayer/documentation/NetworkLayer":{"role":"collection","type":"topic","title":"NetworkLayer","kind":"symbol","url":"\/documentation\/networklayer","identifier":"doc:\/\/network-layer.NetworkLayer\/documentation\/NetworkLayer","abstract":[{"type":"text","text":"The library for network communication."}]},"doc://network-layer.NetworkLayer/documentation/NetworkLayer/AuthenticationInterceptor":{"type":"topic","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"AuthenticationInterceptor"}],"abstract":[{"text":"A custom AuthenticationInterceptor implementation that works with a specific type","type":"text"},{"text":" ","type":"text"},{"text":"of Authenticator conforming to the IAuthenticator protocol.","type":"text"}],"navigatorTitle":[{"kind":"identifier","text":"AuthenticationInterceptor"}],"identifier":"doc:\/\/network-layer.NetworkLayer\/documentation\/NetworkLayer\/AuthenticationInterceptor","kind":"symbol","title":"AuthenticationInterceptor","url":"\/documentation\/networklayer\/authenticationinterceptor","role":"symbol"},"doc://network-layer.NetworkLayer/documentation/NetworkLayer/GettingStarted":{"identifier":"doc:\/\/network-layer.NetworkLayer\/documentation\/NetworkLayer\/GettingStarted","type":"topic","url":"\/documentation\/networklayer\/gettingstarted","role":"article","abstract":[],"title":"Getting Started with Network Layer","kind":"article"}}}